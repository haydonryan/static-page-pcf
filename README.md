# static-page-pcf

An example of PCF static file using rewrite for Apache.

I followed the steps located at:
https://discuss.pivotal.io/hc/en-us/articles/227364367-How-to-Rewrite-URLs-in-HTTP-Requests-in-An-Application-with-php-buildpack

Test by hitting http://test-rewrite.cfapps.io/aaa.  Tail of logs:
```
Retrieving logs for app test-rewrite in org pcfp / space haydon-playground as h...



   2018-05-25T09:14:42.97-0500 [RTR/10] OUT test-rewrite.cfapps.io - [2018-05-25T14:14:42.966+0000] "GET /favicon.ico HTTP/1.1" 200 0 92 "http://test-rewrite.cfapps.io/aaa" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36" "10.10.2.26:32988" "10.10.149.160:61098" x_forwarded_for:"198.208.72.6, 10.10.2.26" x_forwarded_proto:"http" vcap_request_id:"246f0bfd-7899-48c4-45cb-94485483b5ec" response_time:0.005357097 app_id:"2c948c4f-a80b-4de2-bd43-da9e644df2e6" app_index:"0" x_b3_traceid:"66ea8ba18181bbcc" x_b3_spanid:"66ea8ba18181bbcc" x_b3_parentspanid:"-"
   2018-05-25T09:14:42.97-0500 [RTR/10] OUT
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982360 2018] [rewrite:trace3] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] strip per-dir prefix: /home/vcap/app/htdocs/favicon.ico -> favicon.ico, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982387 2018] [rewrite:trace3] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] applying pattern '^(.*)' to uri 'favicon.ico', referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982403 2018] [rewrite:trace4] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] RewriteCond: input='/favicon.ico' pattern='!=/index.php' => matched, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982410 2018] [rewrite:trace2] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] rewrite 'favicon.ico' -> '/index.php?req=favicon.ico',referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982416 2018] [rewrite:trace3] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] split uri=/index.php?req=favicon.ico -> uri=/index.php, args=req=favicon.ico, referer:http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982429 2018] [rewrite:trace2] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] forcing '/index.php' to get passed through to next APIURI-to-filename handler, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982436 2018] [rewrite:trace2] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] trying to replace prefix /home/vcap/app/htdocs/ with /, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982448 2018] [rewrite:trace2] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] trying to replace context docroot /home/vcap/app/htdocs with context prefix , referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982454 2018] [rewrite:trace1] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb844004980/initial] [perdir /home/vcap/app/htdocs/] internal redirect with /index.php [INTERNAL REDIRECT],referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982511 2018] [rewrite:trace3] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb84400b4a0/initial/redir#1] [perdir /home/vcap/app/htdocs/] strip per-dir prefix: /home/vcap/app/htdocs/index.php -> index.php, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982522 2018] [rewrite:trace3] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb84400b4a0/initial/redir#1] [perdir /home/vcap/app/htdocs/] applying pattern '^(.*)' to uri 'index.php', referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982531 2018] [rewrite:trace4] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb84400b4a0/initial/redir#1] [perdir /home/vcap/app/htdocs/] RewriteCond: input='/index.php' pattern='!=/index.php' => not-matched, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | [Fri May 25 14:14:42.982542 2018] [rewrite:trace1] [pid 106:tid 140429609637632] mod_rewrite.c(482): [client 198.208.72.6:53702] 198.208.72.6 - - [test-rewrite.cfapps.io/sid#e203e0][rid#7fb84400b4a0/initial/redir#1] [perdir /home/vcap/app/htdocs/] pass through /home/vcap/app/htdocs/index.php, referer: http://test-rewrite.cfapps.io/aaa
   2018-05-25T09:14:42.98-0500 [APP/PROC/WEB/0] OUT 14:14:42 httpd   | 198.208.72.6 - - [25/May/2018:14:14:42 +0000] "GET /favicon.ico HTTP/1.1" 200 92 vcap_request_id=246f0bfd-7899-48c4-45cb-94485483b5ec peer_addr=10.248.181.53
   ```